<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/home"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ berita ? berita.title : 'Baca Berita' }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="toggleFavorite()">
        <ion-icon 
          slot="icon-only" 
          [name]="berita?.isFavorite ? 'heart' : 'heart-outline'"
          [color]="berita?.isFavorite ? 'danger' : 'light'">
        </ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="berita">
    <!-- 1. Tambahkan atribut 'navigation' dan 'pagination' untuk kontrol slider -->
    <swiper-container [pagination]="true" [navigation]="true" [loop]="true">
      <swiper-slide *ngFor="let img of berita.images">
        <ion-img [src]="img"></ion-img>
      </swiper-slide>
    </swiper-container>

    <ion-card>
      <ion-card-header>
        <ion-card-title>{{ berita.title }}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>{{ berita.content }}</p>
      </ion-card-content>
    </ion-card>

    <!-- Bagian Rating -->
    <ion-item-divider><ion-label>Beri Rating</ion-label></ion-item-divider>
    <div class="ion-text-center ion-padding">
      <ion-button fill="clear" *ngFor="let i of [1,2,3,4,5]" (click)="addRating(i)">
        <ion-icon size="large" name="star-outline"></ion-icon>
      </ion-button>
    </div>

    <!-- Bagian Komentar (kode tidak berubah) -->
    <ion-list>
      <ion-list-header>
        <ion-label>Komentar ({{ berita.comments.length }})</ion-label>
      </ion-list-header>
      <ion-item>
        <ion-input label="Komentar Anda" label-placement="floating" placeholder="Tulis komentar..." [(ngModel)]="newCommentText"></ion-input>
        <ion-button (click)="addComment()" slot="end">Kirim</ion-button>
      </ion-item>
      <div *ngFor="let comment of berita.comments">
        <ion-item lines="full">
          <ion-label><h3>{{ comment.user }}</h3><p>{{ comment.text }}</p></ion-label>
          <ion-button fill="clear" size="small" slot="end" (click)="toggleReply(comment)">Balas</ion-button>
        </ion-item>
        <div class="replies-section" *ngFor="let reply of comment.replies">
          <ion-item lines="none">
            <ion-icon name="return-down-forward-outline" slot="start" class="reply-icon"></ion-icon>
            <ion-label><h3>{{ reply.user }}</h3><p>{{ reply.text }}</p></ion-label>
          </ion-item>
        </div>
        <ion-item *ngIf="comment.showReply" class="reply-input">
          <ion-input placeholder="Tulis balasan..." [(ngModel)]="replyText"></ion-input>
          <ion-button size="small" slot="end" (click)="addReply(comment)">Kirim</ion-button>
        </ion-item>
      </div>
    </ion-list>
  </div>

  <!-- Style (kode tidak berubah) -->
  <style>
    swiper-container { width: 100%; height: 250px; }
    swiper-slide ion-img { width: 100%; height: 100%; object-fit: cover; }
    .replies-section { padding-left: 20px; border-left: 2px solid #f0f0f0; margin-left: 20px; }
    .reply-icon { margin-right: 8px; }
    .reply-input { padding-left: 40px; }
  </style>
</ion-content>

